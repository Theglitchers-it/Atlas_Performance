/**
 * Super Admin Dashboard - Mobile Critical Fixes
 * Fix specifici basati su screenshot reale
 * Priorità: leggibilità e usabilità mobile
 */

/* ==============================================
   CRITICAL FIXES - MOBILE ONLY (0-767px)
   ============================================== */

@media (max-width: 767px) {

    /* ==========================================
       1. HEADER FIX - Titolo troppo grande
       ========================================== */

    /* Container principale header */
    .max-w-7xl > div:first-child {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 0.75rem !important;
        margin-bottom: 1rem !important;
    }

    /* Title "Dashboard Super Admin" */
    .max-w-7xl > div:first-child h1 {
        font-size: 1.5rem !important; /* 24px invece di 28px */
        line-height: 1.3 !important;
        margin-bottom: 0.25rem !important;
        font-weight: 700 !important;
        word-break: break-word !important;
    }

    /* Emoji nel titolo - più piccolo */
    .max-w-7xl > div:first-child h1::first-letter {
        font-size: 1.25rem !important;
    }

    /* Sottotitolo "Panoramica completa..." */
    .max-w-7xl > div:first-child p {
        font-size: 0.8125rem !important; /* 13px */
        line-height: 1.4 !important;
        color: #6b7280 !important;
        margin-top: 0 !important;
    }

    /* Button container (Analytics, ecc) */
    .max-w-7xl > div:first-child > div:last-child,
    .max-w-7xl > div:first-child > a:last-child {
        width: 100% !important;
        margin-top: 0.5rem !important;
    }

    /* Buttons header full-width */
    .max-w-7xl > div:first-child a {
        width: 100% !important;
        justify-content: center !important;
        padding: 0.75rem 1rem !important;
        font-size: 0.875rem !important;
        border-radius: 0.75rem !important;
    }


    /* ==========================================
       2. STAT CARDS FIX - Dimensioni e spacing
       ========================================== */

    /* Grid stats - single column con spacing ottimizzato */
    .grid.grid-cols-1.md\:grid-cols-2.lg\:grid-cols-4 {
        grid-template-columns: 1fr !important;
        gap: 0.875rem !important; /* 14px invece di 24px */
    }

    /* Stat card generale */
    .stat-card {
        padding: 1rem !important; /* 16px invece di 24px */
        border-radius: 1rem !important;
        min-height: auto !important;
    }

    /* Header interno card (icona + badge) */
    .stat-card > div:first-child {
        margin-bottom: 0.75rem !important;
    }

    /* Icona nella card */
    .stat-card .w-14.h-14 {
        width: 2.75rem !important; /* 44px */
        height: 2.75rem !important;
        border-radius: 0.75rem !important;
    }

    .stat-card .w-14 i {
        font-size: 1.375rem !important; /* 22px */
    }

    /* Badge "Totale", "Attivi", ecc */
    .stat-card span.text-sm {
        font-size: 0.6875rem !important; /* 11px */
        padding: 0.25rem 0.5rem !important;
        border-radius: 0.375rem !important;
    }

    /* Numero principale (statistica) */
    .stat-card p.text-5xl,
    .stat-card .stat-number {
        font-size: 2rem !important; /* 32px invece di 48px */
        line-height: 1.2 !important;
        margin-bottom: 0.375rem !important;
        font-weight: 800 !important;
    }

    /* Label sotto numero */
    .stat-card p.text-white.text-opacity-90 {
        font-size: 0.8125rem !important; /* 13px */
        line-height: 1.3 !important;
        margin-bottom: 0.5rem !important;
        opacity: 0.95 !important;
    }

    /* Info aggiuntiva (+X ultimi 30gg) */
    .stat-card > div.mt-4 {
        margin-top: 0.625rem !important;
        font-size: 0.75rem !important; /* 12px */
    }

    .stat-card > div.mt-4 i {
        font-size: 0.6875rem !important;
    }


    /* ==========================================
       3. SECONDARY STATS - Card bianche
       ========================================== */

    /* Secondary stats (Trainer, Atleti, etc) */
    .bg-white.rounded-2xl.shadow-lg.border {
        padding: 0.875rem !important; /* 14px */
        border-radius: 0.875rem !important;
    }

    /* Icona secondary stats */
    .bg-white.rounded-2xl .w-12.h-12 {
        width: 2.25rem !important; /* 36px */
        height: 2.25rem !important;
        border-radius: 0.625rem !important;
    }

    .bg-white.rounded-2xl .w-12 i {
        font-size: 1rem !important;
    }

    /* Numero secondary stats */
    .bg-white.rounded-2xl p.text-4xl {
        font-size: 1.625rem !important; /* 26px */
        line-height: 1.2 !important;
        margin-bottom: 0.375rem !important;
        font-weight: 700 !important;
    }

    /* Label secondary stats */
    .bg-white.rounded-2xl p.text-gray-600 {
        font-size: 0.75rem !important; /* 12px */
        line-height: 1.3 !important;
    }


    /* ==========================================
       4. SPACING GLOBALE
       ========================================== */

    /* Container principale */
    .max-w-7xl {
        padding-left: 0.875rem !important;
        padding-right: 0.875rem !important;
        padding-top: 0.5rem !important;
    }

    /* Space-y riduzioni */
    .space-y-8 > * + * {
        margin-top: 1.25rem !important; /* 20px invece di 32px */
    }

    .space-y-6 > * + * {
        margin-top: 0.875rem !important; /* 14px invece di 24px */
    }

    /* Gap nelle grid */
    .gap-6 {
        gap: 0.875rem !important; /* 14px */
    }

    .gap-4 {
        gap: 0.625rem !important; /* 10px */
    }


    /* ==========================================
       5. SUBSCRIPTION DISTRIBUTION SECTION
       ========================================== */

    /* Section con distribuzione abbonamenti */
    .bg-white.rounded-2xl.shadow-lg.border.p-8 {
        padding: 1rem !important;
        border-radius: 0.875rem !important;
        margin-bottom: 1rem !important;
    }

    /* Header section */
    .bg-white.rounded-2xl h2.text-2xl {
        font-size: 1.125rem !important; /* 18px */
        margin-bottom: 0.5rem !important;
    }

    .bg-white.rounded-2xl p.text-gray-500.text-sm {
        font-size: 0.6875rem !important; /* 11px */
    }

    /* Cards distribuzione */
    .bg-white.rounded-2xl .grid > div {
        padding: 0.75rem !important;
        border-radius: 0.625rem !important;
    }

    /* Tier name */
    .bg-white.rounded-2xl .grid h3 {
        font-size: 0.875rem !important;
    }

    /* Tier number */
    .bg-white.rounded-2xl .grid span.text-3xl {
        font-size: 1.5rem !important;
    }


    /* ==========================================
       6. RECENT TENANTS TABLE
       ========================================== */

    /* Recent tenants section */
    .bg-white.rounded-2xl.p-8 {
        padding: 1rem !important;
    }

    /* Nascondi table header su mobile */
    .overflow-x-auto table thead {
        display: none !important;
    }

    /* Table → Card conversion */
    .overflow-x-auto table {
        display: block !important;
        overflow: visible !important;
    }

    .overflow-x-auto tbody {
        display: block !important;
    }

    .overflow-x-auto tbody tr {
        display: block !important;
        background: white !important;
        border-radius: 0.75rem !important;
        padding: 0.875rem !important;
        margin-bottom: 0.75rem !important;
        border: 1px solid #e5e7eb !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08) !important;
    }

    .overflow-x-auto tbody tr:last-child {
        margin-bottom: 0 !important;
    }

    .overflow-x-auto tbody td {
        display: block !important;
        padding: 0.375rem 0 !important;
        border: none !important;
        text-align: left !important;
    }

    /* Prima cella (nome + avatar) */
    .overflow-x-auto tbody td:first-child {
        padding-bottom: 0.625rem !important;
        margin-bottom: 0.625rem !important;
        border-bottom: 1px solid #f3f4f6 !important;
    }

    /* Avatar più piccolo */
    .overflow-x-auto tbody td .w-10 {
        width: 2rem !important;
        height: 2rem !important;
        font-size: 0.875rem !important;
    }

    /* Labels per dati */
    .overflow-x-auto tbody td:not(:first-child)::before {
        content: attr(data-label);
        font-weight: 600;
        color: #6b7280;
        font-size: 0.6875rem; /* 11px */
        text-transform: uppercase;
        display: block;
        margin-bottom: 0.25rem;
        letter-spacing: 0.025em;
    }

    /* Testo celle */
    .overflow-x-auto tbody td {
        font-size: 0.8125rem !important; /* 13px */
        color: #374151 !important;
    }

    /* Badge status */
    .overflow-x-auto tbody td span {
        font-size: 0.6875rem !important; /* 11px */
        padding: 0.25rem 0.5rem !important;
    }

    /* Link "Dettagli" */
    .overflow-x-auto tbody td:last-child a {
        display: block !important;
        text-align: center !important;
        padding: 0.625rem 1rem !important;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        color: white !important;
        border-radius: 0.5rem !important;
        font-weight: 600 !important;
        font-size: 0.8125rem !important;
        margin-top: 0.5rem !important;
        text-decoration: none !important;
    }


    /* ==========================================
       7. QUICK ACTIONS CARDS
       ========================================== */

    /* Quick actions grid */
    .grid.grid-cols-1.md\:grid-cols-3 > a {
        padding: 1rem !important;
        border-radius: 1rem !important;
    }

    /* Icona quick action */
    .bg-gradient-to-br .w-14.h-14 {
        width: 2.75rem !important;
        height: 2.75rem !important;
        border-radius: 0.75rem !important;
    }

    .bg-gradient-to-br .w-14 i {
        font-size: 1.375rem !important;
    }

    /* Arrow icon */
    .bg-gradient-to-br i.text-2xl {
        font-size: 1.25rem !important;
    }

    /* Title quick action */
    .bg-gradient-to-br h3.text-xl {
        font-size: 1rem !important; /* 16px */
        margin-bottom: 0.375rem !important;
    }

    /* Description */
    .bg-gradient-to-br p {
        font-size: 0.75rem !important; /* 12px */
        line-height: 1.4 !important;
    }


    /* ==========================================
       8. EMPTY STATE
       ========================================== */

    .text-center.py-16 {
        padding: 1.5rem 1rem !important;
    }

    .text-center .w-20 {
        width: 3.5rem !important;
        height: 3.5rem !important;
        margin: 0 auto 1rem !important;
    }

    .text-center i.text-3xl {
        font-size: 1.5rem !important;
    }

    .text-center p.text-lg {
        font-size: 0.875rem !important;
    }


    /* ==========================================
       9. TOUCH IMPROVEMENTS
       ========================================== */

    /* Tutti i link e button touch-friendly */
    a, button {
        min-height: 44px !important;
    }

    /* Touch feedback visivo */
    a:active, button:active {
        opacity: 0.75 !important;
        transform: scale(0.98) !important;
        transition: all 0.1s ease !important;
    }

    /* Card touch feedback */
    .stat-card:active,
    .bg-white.rounded-2xl:active,
    .bg-gradient-to-br:active {
        opacity: 0.95 !important;
    }


    /* ==========================================
       10. TYPOGRAPHY IMPROVEMENTS
       ========================================== */

    /* Miglior contrasto testi */
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    /* Headers più leggibili */
    h1, h2, h3, h4, h5, h6 {
        font-weight: 700 !important;
        letter-spacing: -0.015em !important;
    }

    /* Paragraph spacing */
    p {
        line-height: 1.5 !important;
    }

    /* Bold più evidente */
    strong, b, .font-bold, .font-semibold {
        font-weight: 700 !important;
    }


    /* ==========================================
       11. GRADIENT IMPROVEMENTS
       ========================================== */

    /* Gradienti più vibranti su mobile */
    .stat-card {
        background: linear-gradient(135deg, var(--tw-gradient-from) 0%, var(--tw-gradient-to) 100%) !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
    }

    /* Purple gradient */
    .stat-card:nth-child(1) {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    }

    /* Green gradient */
    .stat-card.green {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%) !important;
    }

    /* Blue gradient */
    .stat-card.blue {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%) !important;
    }

    /* Orange gradient */
    .stat-card.orange {
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%) !important;
    }


    /* ==========================================
       12. SAFE AREA INSETS (iPhone X+)
       ========================================== */

    @supports (padding: max(0px)) {
        body {
            padding-bottom: max(0.5rem, env(safe-area-inset-bottom)) !important;
        }

        .max-w-7xl {
            padding-left: max(0.875rem, env(safe-area-inset-left)) !important;
            padding-right: max(0.875rem, env(safe-area-inset-right)) !important;
        }
    }


    /* ==========================================
       13. SCROLLBAR MOBILE
       ========================================== */

    /* Scrollbar sottile */
    ::-webkit-scrollbar {
        width: 3px !important;
        height: 3px !important;
    }

    ::-webkit-scrollbar-track {
        background: transparent !important;
    }

    ::-webkit-scrollbar-thumb {
        background: rgba(156, 163, 175, 0.5) !important;
        border-radius: 3px !important;
    }


    /* ==========================================
       14. ANIMATION OPTIMIZATIONS
       ========================================== */

    /* Riduci animazioni per performance */
    * {
        transition-duration: 0.2s !important;
    }

    /* Hover disabled su touch devices */
    .stat-card:hover,
    .bg-white.rounded-2xl:hover,
    .bg-gradient-to-br:hover {
        transform: none !important;
    }

    /* Solo active state su mobile */
    .stat-card:active {
        transform: scale(0.98) !important;
    }
}

/* ==============================================
   VERY SMALL SCREENS (< 375px)
   ============================================== */

@media (max-width: 374px) {
    /* iPhone SE e schermi molto piccoli */

    .max-w-7xl > div:first-child h1 {
        font-size: 1.375rem !important; /* 22px */
    }

    .stat-card p.text-5xl,
    .stat-card .stat-number {
        font-size: 1.75rem !important; /* 28px */
    }

    .max-w-7xl {
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }
}

/* ==============================================
   ACCESSIBILITY
   ============================================== */

/* Focus visibile */
@media (max-width: 767px) {
    a:focus, button:focus {
        outline: 2px solid #667eea !important;
        outline-offset: 2px !important;
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
        * {
            animation-duration: 0.01ms !important;
            transition-duration: 0.01ms !important;
        }
    }
}
