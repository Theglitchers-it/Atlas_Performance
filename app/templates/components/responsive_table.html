<!--
Responsive Table Component
Usage:
{% include 'components/responsive_table.html' with
    headers=['Nome', 'Email', 'Stato'],
    rows=[[user.name, user.email, user.status], ...],
    mobile_cards=true
%}

Parameters:
- headers: List of column headers
- rows: List of row data (list of lists)
- mobile_cards: Enable card view on mobile (default: true)
- classes: Additional table classes (optional)
- no_data_message: Message when no data (optional)
-->

{% set mobile_cards = mobile_cards|default(true) %}
{% set no_data_msg = no_data_message|default('Nessun dato disponibile') %}

<div class="responsive-table-container">
    {% if rows and rows|length > 0 %}
        <!-- Desktop Table View -->
        <div class="hidden md:block overflow-x-auto rounded-xl border border-gray-200">
            <table class="min-w-full divide-y divide-gray-200 {{ classes }}">
                <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
                    <tr>
                        {% for header in headers %}
                        <th class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider whitespace-nowrap">
                            {{ header }}
                        </th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    {{ caller() if caller else '' }}
                </tbody>
            </table>
        </div>

        <!-- Mobile Card View -->
        {% if mobile_cards %}
        <div class="md:hidden space-y-4">
            {% block mobile_cards %}
            <!-- Override this block in parent template for custom mobile cards -->
            {% for row in rows %}
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4">
                {% for i in range(headers|length) %}
                <div class="flex justify-between items-center {% if not loop.last %}mb-3 pb-3 border-b border-gray-100{% endif %}">
                    <span class="text-sm font-semibold text-gray-600">{{ headers[i] }}:</span>
                    <span class="text-sm text-gray-900">{{ row[i] }}</span>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
            {% endblock %}
        </div>
        {% endif %}
    {% else %}
        <!-- Empty State -->
        <div class="text-center py-16 bg-white rounded-xl border border-gray-200">
            <div class="w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-inbox text-gray-400 text-3xl"></i>
            </div>
            <p class="text-gray-600 text-lg font-medium">{{ no_data_msg }}</p>
        </div>
    {% endif %}
</div>

<style>
    /* Mobile Card Enhancements */
    @media (max-width: 768px) {
        .responsive-table-container {
            padding: 0;
        }

        .mobile-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .mobile-card:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Touch-friendly spacing */
        .mobile-card > div {
            min-height: 44px; /* iOS touch target minimum */
            display: flex;
            align-items: center;
        }
    }

    /* Smooth transitions */
    .responsive-table-container table tr {
        transition: background-color 0.2s ease;
    }

    .responsive-table-container table tr:hover {
        background-color: rgba(0, 0, 0, 0.02);
    }
</style>
