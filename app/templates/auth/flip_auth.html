<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Login/Register - Atlas Performance{% endblock %}</title>

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’ª</text></svg>">

    <!-- Feather Icons -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <!-- Flip Login CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flip-login.css') }}">

    <style>
        html {
            font-size: 62.5%;
        }
    </style>
</head>
<body class="flip-auth-container">

<div class="flip-auth-wrapper">
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div style="position: fixed; top: 20px; right: 20px; z-index: 9999; max-width: 400px;">
                {% for category, message in messages %}
                    <div style="background: {% if category == 'success' %}#10b981{% elif category == 'danger' or category == 'error' %}#ef4444{% else %}#3b82f6{% endif %}; color: white; padding: 1rem 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); font-size: 1.4em;">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <div id="flip-container">
        <!-- LOGIN SECTION -->
        <div class="flip-login">
            <div class="flip-content">
                <h1>Log In</h1>
                <form method="POST" action="{{ url_for('auth.login') }}">
                    {{ login_form.hidden_tag() }}

                    {{ login_form.email(placeholder="email", type="email", required=true) }}
                    {% if login_form.email.errors %}
                        <div class="error-message">{{ login_form.email.errors[0] }}</div>
                    {% endif %}

                    {{ login_form.password(placeholder="password", type="password", required=true) }}
                    {% if login_form.password.errors %}
                        <div class="error-message">{{ login_form.password.errors[0] }}</div>
                    {% endif %}

                    <span class="remember">Remember me</span>
                    <span class="forget">Forgot password?</span>
                    <span class="clearfix"></span>

                    <button type="submit">Log In</button>
                </form>

                <!-- Mobile Toggle to Register -->
                <div class="mobile-toggle">
                    <button type="button" id="mobile-register-btn">
                        Don't have an account? Register
                    </button>
                </div>

                <span class="loginwith">Or Connect with</span>

                <div class="flip-social-icons">
                    <a href="#"><i data-feather="facebook"></i></a>
                    <a href="#"><i data-feather="twitter"></i></a>
                    <a href="#"><i data-feather="github"></i></a>
                    <a href="#"><i data-feather="linkedin"></i></a>
                </div>

                <span class="copy">&copy; 2026 Atlas Performance</span>
            </div>
        </div>

        <!-- FLIP PANEL - FRONT (Shows "Register" message) -->
        <div class="flip-page flip-front">
            <div class="flip-content">
                <svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user-plus">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="8.5" cy="7" r="4"/>
                    <line x1="20" y1="8" x2="20" y2="14"/>
                    <line x1="23" y1="11" x2="17" y2="11"/>
                </svg>
                <h1>Hello, friend!</h1>
                <p>Enter your personal details and start journey with us</p>
                <button type="button" id="flip-register-btn">
                    Register
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 16 16 12 12 8"/>
                        <line x1="8" y1="12" x2="16" y2="12"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- FLIP PANEL - BACK (Shows "Login" message) -->
        <div class="flip-page flip-back">
            <div class="flip-content">
                <svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-in">
                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                    <polyline points="10 17 15 12 10 7"/>
                    <line x1="15" y1="12" x2="3" y2="12"/>
                </svg>
                <h1>Welcome Back!</h1>
                <p>To keep connected with us please login with your personal info</p>
                <button type="button" id="flip-login-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left-circle">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 8 8 12 12 16"/>
                        <line x1="16" y1="12" x2="8" y2="12"/>
                    </svg>
                    Log In
                </button>
            </div>
        </div>

        <!-- REGISTER SECTION -->
        <div class="flip-register">
            <div class="flip-content">
                <h1>Sign Up</h1>

                <div class="flip-social-icons">
                    <a href="#"><i data-feather="facebook"></i></a>
                    <a href="#"><i data-feather="twitter"></i></a>
                    <a href="#"><i data-feather="github"></i></a>
                    <a href="#"><i data-feather="linkedin"></i></a>
                </div>

                <span class="loginwith">Or</span>

                <form method="POST" action="{{ url_for('auth.register') }}">
                    {{ register_form.hidden_tag() }}

                    {{ register_form.business_name(placeholder="Business Name", required=true) }}
                    {% if register_form.business_name.errors %}
                        <div class="error-message">{{ register_form.business_name.errors[0] }}</div>
                    {% endif %}

                    {{ register_form.first_name(placeholder="First Name", required=true) }}
                    {% if register_form.first_name.errors %}
                        <div class="error-message">{{ register_form.first_name.errors[0] }}</div>
                    {% endif %}

                    {{ register_form.last_name(placeholder="Last Name", required=true) }}
                    {% if register_form.last_name.errors %}
                        <div class="error-message">{{ register_form.last_name.errors[0] }}</div>
                    {% endif %}

                    {{ register_form.email(placeholder="Email", type="email", required=true) }}
                    {% if register_form.email.errors %}
                        <div class="error-message">{{ register_form.email.errors[0] }}</div>
                    {% endif %}

                    {{ register_form.password(placeholder="Password", type="password", required=true) }}
                    {% if register_form.password.errors %}
                        <div class="error-message">{{ register_form.password.errors[0] }}</div>
                    {% endif %}

                    {{ register_form.confirm_password(placeholder="Confirm Password", type="password", required=true) }}
                    {% if register_form.confirm_password.errors %}
                        <div class="error-message">{{ register_form.confirm_password.errors[0] }}</div>
                    {% endif %}

                    <span class="remember">
                        {{ register_form.terms() }}
                        I accept terms
                    </span>
                    {% if register_form.terms.errors %}
                        <div class="error-message">{{ register_form.terms.errors[0] }}</div>
                    {% endif %}

                    <span class="clearfix"></span>

                    <button type="submit">Register</button>
                </form>

                <!-- Mobile Toggle to Login -->
                <div class="mobile-toggle">
                    <button type="button" id="mobile-login-btn">
                        Already have an account? Log In
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Demo Credentials Info -->
    <div style="margin-top: 2rem; background: rgba(255,255,255,0.9); border-radius: 10px; padding: 1.5rem; max-width: 400px; text-align: center; font-size: 1.2em;">
        <p style="font-weight: bold; margin-bottom: 0.5em; color: #333;">Demo Credentials:</p>
        <p style="margin: 0.25em 0; color: #666;">Trainer: trainer@demo.com / demo123</p>
        <p style="margin: 0.25em 0; color: #666;">Athlete: athlete@demo.com / demo123</p>
    </div>
</div>

<!-- Flip Login JS -->
<script src="{{ url_for('static', filename='js/flip-login.js') }}"></script>

<!-- Initialize Feather Icons -->
<script>
    feather.replace();
</script>

</body>
</html>
